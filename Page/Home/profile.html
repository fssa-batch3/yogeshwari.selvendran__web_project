<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live On - Too Fast Too Quick</title>
    <link rel="icon" type="image/png" sizes="32x32" href="../../assets/Icons/live-on.png">
    <link rel="stylesheet" href="../../assets/Css/profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <!-- This is profile-section -->
    <div class="account-section">
        <div class="side-item">
            <div class="page">
                <img class="pro_image" src="../../assets/New_collection/Acc-cover.png" alt="profile">
                <label for="upload-file"><i class="fa-solid fa-camera" style="color: #a322ee;"></i></label>
                <input type="file" accept="image/jpeg,image/png,image/jpg" id="upload-file">
            </div>
            <div class="side-menu">
                <ul>
                    <li>
                        <a href="#profile_page" class="active" autofocus id="profile1"><span class="fa-solid fa-circle-user" ></span>
                            <span>My Profile</span></a>
                    </li>
                    <li>
                        <a href="#order-history" class="active" autofocus id="order_history1"><span class="fa-solid fa-bag-shopping"></span>
                            <span>Orders</span></a>
                    </li>
                    <li>
                        <a href="#appoinment_booking" class="active" autofocus id="appointment1"><span class="fa-solid fa-calendar-check"></span>
                            <span>Appointments</span></a>
                    </li>
                    <!-- <li>
                        <a href="" class="active"><span class="fa-solid fa-circle-user"></span>
                            <span>Wishlist</span></a>
                    </li> -->
                    <li>
                        <a href="" class="active"><span class="fa-solid fa-circle-user"></span>
                        <span>Offers</span></a>
                    </li>
                    <!-- <li>
                        <a href="" class="active"><span class="fa-solid fa-calendar-check"></span>
                            <span>History</span></a>
                    </li> -->
                    <li>
                        <a id="log" class="active"><span class="fa-solid fa-right-from-bracket"></span>
                            <span id="log">Logout</span></a>
                    </li>
                    <li>
                        <a href="../../Page/Home/home.html" class="active"><span class="fa-solid fa-left-long"></span>
                            <span>Exit</span></a>
                    </li>

                </ul>
            </div>
        </div>
        <div class="main-item">
            <main>
                <!-- This is user condainer -->
                <div class="display_cls" id="profile_page">
                    <div class="information">
                        <form id="form">
                            <!-- This is First name  -->
                            <div class="first-name" id="align-num">
                                <label class="more">First Name</label>
                                <input class="name" id="user-firstname" type="text" pattern=^[a-zA-Z]{3,20}$
                                    title="the input field  should contains only alphabetic characters (both upper and lower case) and has a length between 3 and 20 characters."
                                    name="user name" placeholder="First Name" value="" required="true" disabled>
        
                            </div>
                            <!-- This is Last name  -->
                            <div class="last-name" id="align-num">
                                <label class="more">Last Name</label>
                                <input class="name" id="user-lastname" type="text" name="user name" pattern=^[a-zA-Z]{3,20}$
                                    title="the input field  should contains only alphabetic characters (both upper and lower case) and has a length between 3 and 20 characters."
                                    placeholder="Last Name" value="" required="true" disabled>
        
                            </div>
                            <!-- This is email input  -->
                            <div class="email" id="align-num">
                                <label class="more"> Email</label>
                                <input class="name" id="user-email" type="email" name="user email" placeholder="name@gmail.com"
                                    value="" required="true" title="First name connot contain spaces" disabled>
        
                            </div>
                            <!-- This is user mobile number -->
                            <div class="number" id="align-num">
                                <label class="more"> Number</label>
                                <input class="name" id="user-number" type="text" pattern="[0-9]{10}"
                                    title="PLease enter 10 digit number" name="user mobile" placeholder="+91 8923456789"
                                    required="true" disabled>
                            </div>
        
                            <!-- This is districk -->
                            <!-- <div class="address" id="align-num">
                                <label class="more"> Address</label>
        
                                <input class="name" id="user-address" type="text"
                                    pattern="^[a-zA-Z0-9!@#\$%\^&\*\(\)\-_=\+\\|\{\}\[\]:;\" name="user address"
                                    placeholder="Add Address" required="true" disabled>
        
                            </div> -->
                            <!-- This is Address input  -->
                            <div class="address" id="align-num">
                                <label class="more"> Pincode</label>
                                <input class="name" id="user-pincode" type="text" pattern="[0-9]{6}" maxlength="6"
                                    name="user address" placeholder="Pincode" required="true" disabled>
        
                            </div>
                            <!-- This is update button -->
                            <div class="exit">
                                <!-- <button id="log"><span class="fa-solid fa-right-from-bracket"></span>
                                    <span>Logout</span></button> -->
                                <button type="submit" id="btn" class="name">Edit</button>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- This is card section -->
                <!-- <div class="cards">
                    <div class="single-card">
                        <div>
                            <h1>11</h1>
                            <span>Products</span>
                        </div>
                        <div>
                            <span class="fa-solid fa-bag-shopping"></span>
                        </div>
                    </div>
                    <div class="single-card">
                        <div>
                            <h1>50</h1>
                            <span>Customer</span>
                        </div>
                        <div>
                            <span class="fa-solid fa-bag-shopping"></span>
                        </div>
                    </div>
                    <div class="single-card">
                        <div>
                            <h1>79</h1>
                            <span>Customer</span>
                        </div>
                        <div>
                            <span class="fa-solid fa-bag-shopping"></span>
                        </div>
                    </div>
                    <div class="single-card">
                        <div>
                            <h1>79</h1>
                            <span>Customer</span>
                        </div>
                        <div>
                            <span class="fa-solid fa-bag-shopping"></span>
                        </div>
                    </div>
                </div> -->
                <!-- Appoinment booking page -->
                <div id="appoinment_booking" class="display_cls">
                    <div class="booking_appoinment">
                        <h1 class="heading">Up Coming Appoinments</h1>
                        <div class="upcoming">
                            <table>
                                <thead>
                                    <th>Booking id</th>
                                    <th>Vehicle</th>
                                    <th>Time</th>
                                    <th>Date</th>
                                    <!-- <th>Name</th> -->
                                    <!-- <th>Email</th> -->
                                    <th>Phone_number</th>
                                    <th>Service</th>
                                    
                                    <th>Address</th>
                                    <!-- <th>Edit</th>
                                    <th>Delete</th> -->
                                </thead>
                                <tbody class="table_row">
                                </tbody>
                            </table>
                        </div>



                    </div>
                </div>
                <!-- This is order history -->
                <div id="order_history" class="display_cls">
                    <h1>My Orders</h1>
                    <div class="order-his">
                        <!-- <div class="or-contain">
                            <div class="order-pic">
                                <img id="order-image1">
                            </div>
                            <div class="order-ditail">
                                <h4 id="order-name">qwerty</h4>
                                <p id="order-quantity">asdfg</p>
                            </div>
                            <div class="order-price">
                                <p id="order-price">asdf</p>
                            </div>
                            <div class="oeder-address">
                                <span id="hno">sf</span>
                                <span id="street">fbvtg</span>
                                <span id="city">dcec</span>
                                <span id="state">ded</span>
                                <span id="pincode">eded</span>
                            </div>
                        </div> -->
                    </div>
                </div>
            </main>

        </div>
    </div>
    
    <script>




        const orderhis = JSON.parse(localStorage.getItem("order_history"));
        console.log(orderhis);
        const loginuser = JSON.parse(localStorage.getItem("active_user"));
        console.log(loginuser.user_email);
        const use_address = JSON.parse(localStorage.getItem("user_address"));

        let filterOrder;

        if(orderhis==null){
        }
        else{

       
         filterOrder = orderhis.filter((data) => {
            return data.user_email == loginuser["user_email"];
              // console.log(filterOrder);
      
        })
    
        for (const order of filterOrder) {
            const { address_id } = order
            const address = use_address.find(data =>
                data.address_id == address_id

            )
            order["user_address"] = address
        }
console.log(filterOrder);

        for (let i = 0; i < filterOrder.length; i++) {
            // if (orderhis[i]["user_email"] == loginuser["user_email"]) {

            // Create order history page in JSON
            // Create a <div class="or-contain">
            const orderContain = document.createElement("div")
            orderContain.setAttribute("class", "or-contain")
            document.querySelector(".order-his").prepend(orderContain)
            // Create <div class="order-pic">
            const orPic = document.createElement("div")
            orPic.setAttribute("class", "order-pic")
            orderContain.append(orPic)

            // img id="order-image1">
            const orderPicture = document.createElement("img")
            orderPicture.setAttribute("id", "order-image1")
            orderPicture.setAttribute("src", filterOrder[i]["or_pro_img"])
            orPic.append(orderPicture)
            // Create <div class="order-ditail">
            const orDitail = document.createElement("div")
            orDitail.setAttribute("class", "order-ditail")
            orderContain.append(orDitail)
            // Create <h4 id="order-name"
            const orName = document.createElement("h3")
            orName.setAttribute("id", "order-name")
            orName.innerText =filterOrder[i]["or_pro_name"]
            orDitail.append(orName)
            // Create <p id="order-quantity">
            const orQuan = document.createElement("p")
            orQuan.setAttribute("id", "order-quantity")
            orQuan.innerText ="Quantity:" + filterOrder[i]["or_pro_quantity"]
            orDitail.append(orQuan)
            // Create <div class="order-price">
            const orPrice = document.createElement("div")
            orPrice.setAttribute("class", "order-price")
            orderContain.append(orPrice)
            // Create <p id="order-price">
            const orderPrice = document.createElement("p")
            orderPrice.setAttribute("id", "order-price")
            orderPrice.innerText = filterOrder[i]["order_price"]
            orPrice.append(orderPrice)
            // create <div class="oeder-address">
            const orAdd = document.createElement("div")
            orAdd.setAttribute("class", "oeder-address")
            orderContain.append(orAdd)
            // Create <span id="hno">sf</span>
            const orHouse = document.createElement("span")
            orHouse.setAttribute("id", "hno")
            orHouse.innerText = filterOrder[i]["user_address"]["user_houseNo"]
            orAdd.append(orHouse)
            // Create <span id="orStreet">fbvtg</span>
            const orStreet = document.createElement("span")
            orStreet.setAttribute("id", "orStreet")
            orStreet.innerText = filterOrder[i]["user_address"]["user_street"]
            orAdd.append(orStreet)
            // Create <span id="city">dcec</span>
            const orCity = document.createElement("span")
            orCity.setAttribute("id", "city")
            orCity.innerText = filterOrder[i]["user_address"]["user_city"]
            orAdd.append(orCity)
            //    Create <span id="state">ded</span>
            const orState = document.createElement("span")
            orState.setAttribute("id", "state")
            orState.innerText = filterOrder[i]["user_address"]["user_state"]
            orAdd.append(orState)
            // Create <span id="pincode">eded</span>
            const orPin = document.createElement("span")
            orPin.setAttribute("id", "pincode")
            orPin.innerText ="-"+ filterOrder[i]["user_address"]["pincode"]+"."
            orAdd.append(orPin)
        }
    }


    // This is booking data get in localStorage 
        const book = JSON.parse(localStorage.getItem("book_data"));

        const active_user = JSON.parse(localStorage.getItem("active_user"));


        if(book==null){
            const appointmentpage =document.createElement("h3")
            appointmentpage.innerHTML="You have no appointment"
document.querySelector(".heading").prepend(appointmentpage)
        }
        else{

  

        let filterappointment = book.filter((data) => {
            return data.User_id == active_user["user_id"]

        })
        filterappointment.forEach(item => {
            
            document.querySelector(".table_row").innerHTML += ` <tr>
                                        <td>${item.Booking_id}</td>
                                        <td>${item.Vehicle_type}</td>
                                        <td>${item.Booking_time}</td>
                                        <td>${item.Booking_date}</td>
                                        <td>${item.cus_phone}</td>
                                        <td>${item.Booking_service}</td>
                                        <td>${item.cus_hNo+" "+item.cus_street+" "+item.cus_city+" "+item.cus_state}</td>
                                    </tr>`
        });

    }

    const display_div = document.querySelectorAll(".display_cls");
   
for (let i = 0; i < display_div.length; i++) {
    display_div[i].style.display = "none"
    
}

const appoitment_div = document.getElementById("appoinment_booking");
const appoitement_profile = document.querySelector("#appointment1");
appoitement_profile.addEventListener("click", function () {
    appoitment_div.style.display = "block";
})

const order_div = document.getElementById("order_history");
const order_profile = document.querySelector("#order_history1");
order_profile.addEventListener("click", function () {
    order_div.style.display = "block";
    console.log("1");
})

const profile_div = document.getElementById("profile_page");
const view_profile = document.querySelector("#profile1");
view_profile.addEventListener("click", function () {
    profile_div.style.display = "block";
})


view_profile.click();



        // This is collect a data from form
        // const vehicleNumber = document.getElementById("vehicle-number");
        // const fromAddress = document.getElementById("from-address");
        // const toAddress = document.getElementById("to-address");
        // const date = document.getElementById("data");
        // const time = document.getElementById("vvehicle-time");
        // const vehicleType = document.getElementById("vehicle-type");
        // const contactNumber = document.getElementById("vehicle-number");
        // const cusName = document.getElementById("vehicle-number");

    </script>
<script src="../../Page/JS files/user-profile.js"></script>


</body>

</html>